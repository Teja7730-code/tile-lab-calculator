<!DOCTYPE html>
<html>
<head>
  <title>Tile Lab Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
      background: linear-gradient(180deg,#e9f1ff,#dfe9f3);
      text-align: center;
      color: #1d1d1f;
    }

    h2 {
      margin-top: 30px;
      font-weight: 600;
    }

    .card {
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(25px);
      -webkit-backdrop-filter: blur(25px);
      border-radius: 28px;
      padding: 25px;
      margin: 25px auto;
      max-width: 420px;
      box-shadow:
        0 10px 30px rgba(0,0,0,0.08);
    }

    input {
      width: 90%;
      padding: 14px;
      margin: 8px;
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,0.1);
      font-size: 16px;
      outline: none;
    }

    button {
      padding: 12px 22px;
      margin: 10px;
      border-radius: 22px;
      border: none;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }

    .primary {
      background: #007aff;
      color: white;
    }

    .primary:hover { opacity: 0.85; }

    .secondary {
      background: #e5e5ea;
    }

    .danger {
      background: #ff3b30;
      color: white;
    }

    .result {
      font-size: 22px;
      font-weight: 600;
      margin-top: 15px;
      color: #007aff;
    }

    .hidden { display: none; }
  </style>
</head>

<body>

<h2>Tile Lab Calculator</h2>

<!-- LOGIN -->
<div id="loginDiv">
  <div class="card">
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button class="primary" onclick="login()">Login</button>
    <button class="secondary" onclick="signup()">Sign Up</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
  <div class="card">
    <button class="primary" onclick="showCalc('wa')">Water Absorption</button>
    <button class="primary" onclick="showCalc('bd')">Bulk Density</button>
    <button class="primary" onclick="showCalc('mor')">MOR</button>
    <button class="primary" onclick="showCalc('bs')">Breaking Strength</button>
    <br>
    <button class="danger" onclick="logout()">Logout</button>
  </div>
</div>

<!-- WATER ABSORPTION -->
<div id="wa" class="hidden">
  <div class="card">
    <h3>Water Absorption (%)</h3>
    <input type="number" id="wa_w1" placeholder="Dry Weight (W1)">
    <input type="number" id="wa_w2" placeholder="Wet Weight (W2)">
    <button class="primary" onclick="calcWA()">Calculate</button>
    <div class="result" id="wa_result"></div>
    <button class="secondary" onclick="back()">Back</button>
  </div>
</div>

<!-- BULK DENSITY -->
<div id="bd" class="hidden">
  <div class="card">
    <h3>Bulk Density (g/cm³)</h3>
    <input type="number" id="bd_w1" placeholder="Dry Weight (W1)">
    <input type="number" id="bd_w2" placeholder="Suspended Weight (W2)">
    <input type="number" id="bd_w3" placeholder="Saturated Weight (W3)">
    <button class="primary" onclick="calcBD()">Calculate</button>
    <div class="result" id="bd_result"></div>
    <button class="secondary" onclick="back()">Back</button>
  </div>
</div>

<!-- MOR -->
<div id="mor" class="hidden">
  <div class="card">
    <h3>MOR</h3>
    <input type="number" id="mor_f" placeholder="Peak Load (kgf)">
    <input type="number" id="mor_l" placeholder="Span (mm)">
    <input type="number" id="mor_b" placeholder="Width (mm)">
    <input type="number" id="mor_d" placeholder="Thickness (mm)">
    <button class="primary" onclick="calcMOR()">Calculate</button>
    <div class="result" id="mor_result"></div>
    <button class="secondary" onclick="back()">Back</button>
  </div>
</div>

<!-- BREAKING STRENGTH -->
<div id="bs" class="hidden">
  <div class="card">
    <h3>Breaking Strength</h3>
    <input type="number" id="bs_f" placeholder="Peak Load (kgf)">
    <input type="number" id="bs_l" placeholder="Span (mm)">
    <input type="number" id="bs_b" placeholder="Width (mm)">
    <button class="primary" onclick="calcBS()">Calculate</button>
    <div class="result" id="bs_result"></div>
    <button class="secondary" onclick="back()">Back</button>
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBUUqKaKs9-vDaAoWE2UorKD90SoQe-iMA",
    authDomain: "tiles-a850f.firebaseapp.com",
    projectId: "tiles-a850f",
    storageBucket: "tiles-a850f.firebasestorage.app",
    messagingSenderId: "1070603762129",
    appId: "1:1070603762129:web:7cd3889cbad403320d8f0"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.login = () => signInWithEmailAndPassword(auth,email.value,password.value).catch(e=>alert(e.message));
  window.signup = () => createUserWithEmailAndPassword(auth,email.value,password.value).catch(e=>alert(e.message));
  window.logout = () => signOut(auth);

  onAuthStateChanged(auth,user=>{
    if(user){ loginDiv.classList.add("hidden"); dashboard.classList.remove("hidden"); }
    else{ loginDiv.classList.remove("hidden"); dashboard.classList.add("hidden"); }
  });

  function clearAll() {
    document.querySelectorAll("input").forEach(i=>i.value="");
    document.querySelectorAll(".result").forEach(r=>r.innerHTML="");
  }

  window.showCalc = id => {
    dashboard.classList.add("hidden");
    document.getElementById(id).classList.remove("hidden");
  };

  window.back = () => {
    clearAll();
    document.querySelectorAll("#wa,#bd,#mor,#bs").forEach(el=>el.classList.add("hidden"));
    dashboard.classList.remove("hidden");
  };

  window.calcWA = () => {
    let w1=parseFloat(wa_w1.value), w2=parseFloat(wa_w2.value);
    wa_result.innerHTML=((w2-w1)/w1*100).toFixed(2)+" %";
  };

  window.calcBD = () => {
    let w1=parseFloat(bd_w1.value), w2=parseFloat(bd_w2.value), w3=parseFloat(bd_w3.value);
    bd_result.innerHTML=(w1/(w3-w2)).toFixed(3)+" g/cm³";
  };

  window.calcMOR = () => {
    let f=parseFloat(mor_f.value)*9.80665;
    let l=parseFloat(mor_l.value);
    let b=parseFloat(mor_b.value);
    let d=parseFloat(mor_d.value);

    let morN=((3*f*l)/(2*b*d*d));
    let morKg=morN*10.1972;

    mor_result.innerHTML=
      morN.toFixed(2)+" N/mm² <br>"+morKg.toFixed(2)+" kg/cm²";
  };

  window.calcBS = () => {
    let f=parseFloat(bs_f.value)*9.80665;
    let l=parseFloat(bs_l.value);
    let b=parseFloat(bs_b.value);
    let bs=(f*l)/b;
    bs_result.innerHTML=bs.toFixed(2)+" N";
  };
</script>

</body>
</html>
