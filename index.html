<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tile Lab Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background:linear-gradient(180deg,#dbe4ea,#eef3f7);
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.glass{
backdrop-filter:blur(25px);
background:rgba(255,255,255,0.5);
border-radius:28px;
padding:35px;
width:390px;
box-shadow:
0 20px 45px rgba(0,0,0,0.15),
inset 0 0 0 1px rgba(255,255,255,0.7);
transition:0.3s;
}

h1{text-align:center;margin-bottom:25px;}

input{
width:100%;
padding:14px;
border:none;
border-radius:18px;
background:rgba(255,255,255,0.7);
margin-bottom:15px;
font-size:15px;
outline:none;
}

button{
padding:12px 20px;
border:none;
border-radius:20px;
cursor:pointer;
font-size:14px;
margin-top:8px;
transition:0.3s;
}

.primary{
background:linear-gradient(135deg,#3a8dde,#00c6ff);
color:white;
}

.secondary{
background:rgba(255,255,255,0.6);
}

.danger{
background:linear-gradient(135deg,#ff5f6d,#ff9966);
color:white;
}

.hidden{display:none;}

.result{
margin-top:20px;
font-weight:600;
text-align:center;
font-size:18px;
}
</style>
</head>

<body>

<div class="glass">

<h1>Tile Lab</h1>

<!-- LOGIN -->
<div id="loginView">
<input id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<button class="primary" onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboardView" class="hidden">
<button class="primary" onclick="openWA()">Water Absorption</button>
<button class="primary" onclick="openBD()">Bulk Density</button>
<button class="primary" onclick="openMOR()">MOR</button>
<button class="primary" onclick="openBS()">Breaking Strength</button>
<button class="danger" onclick="logout()">Logout</button>
</div>

<!-- TEST AREA -->
<div id="testView" class="hidden">
<h3 id="testTitle"></h3>
<div id="inputs"></div>
<button class="primary" onclick="calculate()">Calculate</button>
<div class="result" id="result"></div>
<button class="secondary" onclick="goDashboard()">Back</button>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-auth.js";

const firebaseConfig = {
apiKey: "AIzaSyBUUqKaKs9-vDaAoWE2UorKD90SoQe-iMA",
authDomain: "tiles-a850f.firebaseapp.com",
projectId: "tiles-a850f"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let currentTest="";

window.login = async function(){
try{
await signInWithEmailAndPassword(auth,email.value,password.value);
}catch(e){alert("Login Failed");}
}

window.logout = function(){ signOut(auth); }

onAuthStateChanged(auth,user=>{
reset();
if(user){
dashboardView.classList.remove("hidden");
}else{
loginView.classList.remove("hidden");
}
});

function reset(){
loginView.classList.add("hidden");
dashboardView.classList.add("hidden");
testView.classList.add("hidden");
result.innerText="";
}

window.goDashboard=function(){
reset();
dashboardView.classList.remove("hidden");
}

window.openWA=function(){
reset();
testView.classList.remove("hidden");
testTitle.innerText="Water Absorption (%)";
inputs.innerHTML=`
<input id="v1" placeholder="Dry Weight (g)">
<input id="v2" placeholder="Wet Weight (g)">
`;
currentTest="WA";
}

window.openBD=function(){
reset();
testView.classList.remove("hidden");
testTitle.innerText="Bulk Density (g/cc)";
inputs.innerHTML=`
<input id="v1" placeholder="Dry Weight (g)">
<input id="v2" placeholder="Wet Weight (g)">
<input id="v3" placeholder="Suspended Weight (g)">
`;
currentTest="BD";
}

window.openMOR=function(){
reset();
testView.classList.remove("hidden");
testTitle.innerText="MOR";
inputs.innerHTML=`
<input id="v1" placeholder="Peak Load (kgf)">
<input id="v2" placeholder="Span (mm)">
<input id="v3" placeholder="Width (mm)">
<input id="v4" placeholder="Thickness (mm)">
`;
currentTest="MOR";
}

window.openBS=function(){
reset();
testView.classList.remove("hidden");
testTitle.innerText="Breaking Strength (N)";
inputs.innerHTML=`
<input id="v1" placeholder="Peak Load (kgf)">
<input id="v2" placeholder="Length (mm)">
<input id="v3" placeholder="Width (mm)">
`;
currentTest="BS";
}

window.calculate=function(){

if(currentTest==="WA"){
let dry=parseFloat(v1.value);
let wet=parseFloat(v2.value);
let res=((wet-dry)/dry*100).toFixed(2);
result.innerText="Result = "+res+" %";
}

if(currentTest==="BD"){
let dry=parseFloat(v1.value);
let wet=parseFloat(v2.value);
let sus=parseFloat(v3.value);
let res=(dry/(wet-sus)).toFixed(3);
result.innerText="Result = "+res+" g/cc";
}

if(currentTest==="MOR"){
let P=parseFloat(v1.value)*9.81;
let L=parseFloat(v2.value);
let b=parseFloat(v3.value);
let d=parseFloat(v4.value);
let res=(3*P*L/(2*b*d*d));
let nmm=res.toFixed(2);
let kgcm=(res*10.1972).toFixed(2);
result.innerText="Result = "+nmm+" N/mm²  |  "+kgcm+" kg/cm²";
}

if(currentTest==="BS"){
let F=parseFloat(v1.value)*9.81;
let L=parseFloat(v2.value);
let b=parseFloat(v3.value);
let res=(F*L/b).toFixed(2);
result.innerText="Result = "+res+" N";
}

}

</script>

</body>
</html>
